# Kimi 任務 PWA 測試指南

本文檔提供如何全面測試 Kimi 任務 PWA 應用程序的詳細步驟，包括本地測試和生產環境測試。

## 本地測試環境設置

### 1. 啟動本地開發服務器

```bash
cd liff
npm install  # 如果尚未安裝依賴
npm start
```

這將啟動開發服務器，通常在 `http://localhost:3000`。

### 2. 配置本地環境變數

確保您有正確設置的 `.env` 文件：

```
REACT_APP_API_URL=http://localhost:5000/api
REACT_APP_LINE_CLIENT_ID=your_line_client_id
REACT_APP_LINE_CALLBACK_URL=http://localhost:3000/auth/line/callback
```

### 3. 啟動本地後端服務

在另一個終端窗口：

```bash
python app.py
```

確保後端服務在 `http://localhost:5000` 運行。

## 功能測試清單

### 基本 UI 測試

1. **響應式設計**：
   - 在不同大小的窗口中調整瀏覽器大小
   - 使用 Chrome DevTools 的設備模擬器測試不同移動設備

2. **主題與樣式**：
   - 確認顏色符合品牌設計
   - 檢查字體和排版的一致性
   - 測試深色模式（如果支持）

### PWA 功能測試

1. **安裝測試**：
   - 在 Chrome 中打開應用，確認顯示"安裝"按鈕
   - 點擊安裝並驗證應用成功安裝到主屏幕
   - 從主屏幕啟動應用，確認啟動體驗

2. **離線功能**：
   - 在 Chrome DevTools 中切換到"離線"模式
   - 確認應用仍然可以啟動
   - 測試哪些功能在離線模式下可用

3. **Service Worker**：
   - 在 Chrome DevTools 的 Application 選項卡中檢查 Service Worker 狀態
   - 確認資源緩存是否正確
   - 測試更新機制：修改代碼，刷新頁面，確認更新被應用

### 任務功能測試

1. **創建任務**：
   - 填寫任務表單，測試所有字段的驗證
   - 提交任務並確認成功創建
   - 測試錯誤處理：提交無效數據並確認適當的錯誤消息

2. **編輯任務**：
   - 選擇現有任務進行編輯
   - 測試日期選擇器和時間選擇器功能
   - 確認保存編輯後更改被正確應用

3. **刪除任務**：
   - 選擇任務進行刪除
   - 確認刪除確認對話框正常工作
   - 確認任務被成功刪除

### LINE 集成測試

1. **LINE 登錄**：
   - 點擊 LINE 登錄按鈕
   - 完成 LINE 授權流程
   - 確認成功重定向回應用並正確顯示用戶資料

2. **LINE 消息發送**：
   - 創建帶提醒的任務
   - 確認提醒通知被發送到關聯的 LINE 帳戶
   - 測試點擊 LINE 消息中的按鈕響應

## 性能測試

1. **加載性能**：
   - 使用 Chrome DevTools 的 Performance 選項卡分析加載時間
   - 檢查首次內容繪制 (FCP) 和首次有意義繪制 (FMP) 指標
   - 使用 PageSpeed Insights 或 Lighthouse 進行性能評分

2. **網絡性能**：
   - 在 Network 選項卡中模擬不同網絡條件（3G, 4G）
   - 分析資源加載瀑布圖，確認優先順序正確
   - 檢查資源大小和加載時間

## 跨瀏覽器測試

在以下瀏覽器中測試應用：
- Chrome (最新版本)
- Firefox (最新版本)
- Safari (最新版本)
- Edge (最新版本)
- 移動瀏覽器 (iOS Safari, Android Chrome)

## 安全測試

1. **認證與授權**：
   - 測試未經授權用戶是否無法訪問受保護頁面
   - 確認 JWT 令牌正確實施且過期機制正常工作
   - 測試登出功能是否正確清除憑證

2. **數據保護**：
   - 確認敏感數據在傳輸中加密 (HTTPS)
   - 測試 API 端點的權限控制
   - 確認不存在 XSS 或 CSRF 漏洞

## 使用自動化測試

### 單元測試

```bash
cd liff
npm test
```

確認所有單元測試通過。

### 端到端測試

如果配置了 Cypress 或 Playwright：

```bash
# 使用 Cypress
npm run cypress:open

# 或使用 Playwright
npm run test:e2e
```

## 生產環境測試

1. **構建測試**：

```bash
npm run build
npx serve -s build
```

在瀏覽器中訪問 `http://localhost:5000` 測試構建版本。

2. **部署後測試**：

在部署到生產環境後，執行以下操作：
- 測試整個用戶旅程，從登錄到創建任務
- 確認所有 API 調用在生產環境中正常工作
- 驗證 PWA 功能在實際設備上的表現
- 測試推送通知（如果實施）

## 故障排除與日誌

1. **前端錯誤收集**：
   - 在控制台中查看錯誤和警告
   - 使用 Sentry 或類似工具收集生產環境錯誤

2. **後端日誌分析**：
   - 檢查後端日誌中的錯誤
   - 分析 API 調用的響應時間和狀態碼

## 測試報告模板

記錄測試結果，包括：
- 測試日期與環境
- 測試的功能和結果 (通過/失敗)
- 發現的問題和錯誤
- 螢幕截圖或錄像（如適用）
- 後續行動建議 